(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a106db4"],{2017:function(e,t,n){},2992:function(e,t,n){"use strict";n("2017")},4574:function(e,t,n){"use strict";n("e124")},b0c0:function(e,t,n){var a=n("83ab"),s=n("9bf2").f,r=Function.prototype,c=r.toString,i=/^\s*function ([^ (]*)/,o="name";a&&!(o in r)&&s(r,o,{configurable:!0,get:function(){try{return c.call(this).match(i)[1]}catch(e){return""}}})},e124:function(e,t,n){},f778:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user_edit"},[n("nav-bar"),n("edit-info"),n("edit-back")],1)},s=[],r=n("8f0e"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"edit_info"},[a("div",{staticClass:"updateFile"},[a("van-uploader",{staticClass:"uploadImg",attrs:{"preview-size":"25vw","after-read":e.afterRead}}),a("div",{staticClass:"edit_banner"},[a("span",[e._v("头像")]),e.model.user_img?a("img",{attrs:{src:e.model.user_img,alt:""}}):a("img",{attrs:{src:n("0508"),alt:""}})])],1),a("div",{staticClass:"edit_banner",on:{click:function(t){e.nickName=!0}}},[a("span",[e._v("昵称")]),a("span",[e._v(e._s(e.model.name))])]),a("div",{staticClass:"edit_banner"},[a("span",[e._v("账号")]),a("span",[e._v(e._s(e.model.username))])]),a("div",{staticClass:"edit_banner",on:{click:function(t){e.gendershow=!0}}},[a("span",[e._v("性别")]),a("span",[e._v(e._s(e.model.gender))])]),a("div",{staticClass:"edit_banner",on:{click:function(t){e.autograph=!0}}},[a("span",[e._v("个性签名")]),a("span",[e._v(e._s(e.model.user_desc))])])]),a("van-dialog",{attrs:{title:"昵称","show-cancel-button":""},on:{confirm:e.nickNameConfirm},model:{value:e.nickName,callback:function(t){e.nickName=t},expression:"nickName"}},[a("van-field",{model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1),a("van-dialog",{attrs:{title:"个性签名","show-cancel-button":""},on:{confirm:e.autographConfirm},model:{value:e.autograph,callback:function(t){e.autograph=t},expression:"autograph"}},[a("van-field",{model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1),a("van-action-sheet",{attrs:{actions:e.actions,"close-on-click-action":""},on:{select:e.onSelect},model:{value:e.gendershow,callback:function(t){e.gendershow=t},expression:"gendershow"}})],1)},i=[],o=n("1da1"),u=(n("b0c0"),n("96cf"),{components:{},data:function(){return{model:{},nickName:!1,autograph:!1,content:"",gendershow:!1,actions:[{name:"男",val:0},{name:"女",val:1}]}},created:function(){this.getUserData()},methods:{getUserData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/user/"+localStorage.getItem("id"));case 2:n=t.sent,e.model=n.data[0],console.log(n);case 5:case"end":return t.stop()}}),t)})))()},afterRead:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=new FormData,a.append("file",e.file),n.next=4,t.$http.post("/upload",a);case 4:s=n.sent,t.model.user_img=s.data.url,t.userUpDate();case 7:case"end":return n.stop()}}),n)})))()},userUpDate:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("/update/"+localStorage.getItem("id"),e.model);case 2:n=t.sent,n.data.code&&e.$msg.success("修改成功");case 4:case"end":return t.stop()}}),t)})))()},nickNameConfirm:function(){var e=/^.{2,8}$/;e.test(this.content)?(this.model.name=this.content,this.userUpDate()):this.$msg.fail("请输入2到8位字符"),this.content=""},autographConfirm:function(){this.model.user_desc=this.content,this.userUpDate(),this.content=""},onSelect:function(e){this.model.gender=e.name,this.userUpDate()}}}),l=u,d=(n("4574"),n("2877")),m=Object(d["a"])(l,c,i,!1,null,"0c9e9e40",null),f=m.exports,p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"edit_back"},[n("div",{staticClass:"back_home",on:{click:function(t){return e.$router.push("/home")}}},[e._v("返回首页")]),n("div",{staticClass:"back_user",on:{click:function(t){return e.$router.push("/userinfo")}}},[e._v("返回个人中心")])])},v=[],h={components:{},data:function(){return{}}},g=h,_=(n("2992"),Object(d["a"])(g,p,v,!1,null,"8bb1f780",null)),b=_.exports,k={components:{NavBar:r["a"],EditInfo:f,EditBack:b},data:function(){return{}}},w=k,C=Object(d["a"])(w,a,s,!1,null,"bede881a",null);t["default"]=C.exports}}]);
//# sourceMappingURL=chunk-2a106db4.cffcc565.js.map